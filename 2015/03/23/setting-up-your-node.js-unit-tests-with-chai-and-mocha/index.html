<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Setting Up your Node.js Unit Tests with Chai And Mocha  &middot; Polyglott</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="Chai, javascript, Mocha, Node.js, Unit Testing, ">


<meta property="og:title" content="Setting Up your Node.js Unit Tests with Chai And Mocha  &middot; Polyglott ">
<meta property="og:site_name" content="Polyglott"/>
<meta property="og:url" content="https://ottogiron.me/2015/03/23/setting-up-your-node.js-unit-tests-with-chai-and-mocha/" />
<meta property="og:locale" content="en-EN">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2015-03-23T00:00:00Z" />
<meta property="og:article:modified_time" content="2015-03-23T00:00:00Z" />

  
    
<meta property="og:article:tag" content="Chai">
    
<meta property="og:article:tag" content="javascript">
    
<meta property="og:article:tag" content="Mocha">
    
<meta property="og:article:tag" content="Node.js">
    
<meta property="og:article:tag" content="Unit Testing">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@hottroth" />
<meta name="twitter:creator" content="@hottroth" />
<meta name="twitter:title" content="Setting Up your Node.js Unit Tests with Chai And Mocha" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="https://ottogiron.me/2015/03/23/setting-up-your-node.js-unit-tests-with-chai-and-mocha/" />
<meta name="twitter:domain" content="https://ottogiron.me/">
  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Setting Up your Node.js Unit Tests with Chai And Mocha",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2015-03-23",
    "description": "",
    "wordCount": 499
  }
</script>



<link rel="canonical" href="https://ottogiron.me/2015/03/23/setting-up-your-node.js-unit-tests-with-chai-and-mocha/" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://ottogiron.me/touch-icon-144-precomposed.png">
<link href="https://ottogiron.me/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.40.3" />

  
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="https://ottogiron.me/css/font-awesome.min.css">
<link rel="stylesheet" href="https://ottogiron.me/css/style.css">
<link rel="stylesheet" href="https://ottogiron.me/css/highlight/default.css">

  
  
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-71498851-1', 'auto');
	  ga('send', 'pageview');

	</script>

</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="https://ottogiron.me/">
  Polyglott

</a>

</div>

  
<div class="container topline">
  
  About today


</div>


</div>

  <nav class="container nav primary no-print">
  

<a class="homelink" href="https://ottogiron.me/">Home</a>


  
<a href="https://ottogiron.me/about">About</a>

<a href="https://ottogiron.me/categories" title="Show Categories">Categories</a>

<a href="https://ottogiron.me/post" title="Show list of posts">Posts</a>

<a href="https://ottogiron.me/tags" title="Show list of tags">Tags</a>


</nav>

<div class="container nav secondary no-print">
  
<a id="contact-link-email" class="contact_link" href="mailto:ottog2486@gmail.com">
  <span class="fa fa-envelope-square"></span><span>email</span></a>



<a id="contact-link-github" class="contact_link" href="https://github.com/ottogiron">
  <span class="fa fa-github-square"></span><span>github</span></a>









<a id="contact-link-facebook" class="contact_link" href="https://www.facebook.com/otto.giron">
  <span class="fa fa-facebook-square"></span><span>facebook</span></a>



<a id="contact-link-twitter" class="contact_link" href="https://twitter.com/hottroth">
  <span class="fa fa-twitter-square"></span><span>twitter</span></a>













</div>


  

</header>


<article id="main-content" class="container main_content single">
  <header class="container hat">
  <h1>Setting Up your Node.js Unit Tests with Chai And Mocha
</h1>

  <div class="metas">
<time datetime="2015-03-23">23 Mar, 2015</time>


  
    &middot; by Otto Giron
  
  &middot; Read in about 3 min
  &middot; (499 Words)
  <br>
  
<a class="label" href="https://ottogiron.me/tags/chai">Chai</a>

<a class="label" href="https://ottogiron.me/tags/javascript">javascript</a>

<a class="label" href="https://ottogiron.me/tags/mocha">Mocha</a>

<a class="label" href="https://ottogiron.me/tags/node.js">Node.js</a>

<a class="label" href="https://ottogiron.me/tags/unit-testing">Unit Testing</a>



</div>

</header>

  <div class="container content">
  <p>In this post I&#8217;m going to list the steps for setting up a Node.js project with unit testing.</p>

<p></p>

<h2 id="the-tools">The Tools</h2>

<h3 id="mocha">Mocha</h3>

<p><a href="https://mochajs.org/">Mocha</a> is a JavaScript test framework. You can use <a href="https://mochajs.org/">Mocha</a> in both server (Node.js) and the browser. Given the asynchronous nature of JavaScript programming model in both Node.js and browser, <a href="https://mochajs.org/">Mocha</a> provides a neat syntax for performing asynchronous test.</p>

<h3 id="chai">Chai</h3>

<p><a href="https://chaijs.com/">Chai</a> is a BDD/TDD assertion library.</p>

<p><a href="https://chaijs.com/">Chai</a> comes in two flavors, BDD and the clasical TDD assert style. In this how to, I&#8217;m going to use the &#8216;Should&#8217; (BDD) interface, since it&#8217;s the one I enjoy the most.</p>

<h3 id="prerrequisites">Prerrequisites</h3>

<p>Node.js &gt;=0.12 and npm</p>

<h3 id="setting-up-your-project">Setting up your project</h3>

<ul>
<li><strong>Create a new directory. In your terminal run:</strong></li>
</ul>

<pre class="brush: bash; title: ; notranslate" title="">mochachaitest && cd mochachaitest
</pre>

<ul>
<li><strong>Initialize a new Node project. Run &#8216;npm init&#8217;, and follow the steps.</strong></li>
</ul>

<pre class="brush: bash; title: ; notranslate" title="">npm init

name: (mochachaitest)
version: (1.0.0)
description:
entry point: (index.js)
test command:
git repository:
keywords:
author: Otto Giron
license: (ISC) MIT
</pre>

<ul>
<li><strong>Install Mocha and Chai. In your terminal run:</strong></li>
</ul>

<pre class="brush: bash; title: ; notranslate" title="">npm install mocha chai --save-dev
</pre>

<p><em>Note that I&#8217;ve added the &#8216;&#8211;save-dev&#8217; flag at the end, since these dependencies will be useful only in your development environment.</em></p>

<h3 id="creating-a-simple-test-file">Creating a simple test file</h3>

<p>By default, Mocha runs *.js test files inside a test folder under your root directory (mochachaitest).</p>

<ul>
<li><em>Create a test folder</em></li>
</ul>

<pre class="brush: bash; title: ; notranslate" title="">mkdir test
</pre>

<ul>
<li>Create a file &#8216;first-test.js&#8217; under test folder with the following content</li>
</ul>

<pre class="brush: jscript; title: ; notranslate" title="">// require chai and initialize 'shoud()'
var should = require('chai').should();

//Describe the purpose of your unit tests suite

describe('Showcase of mocha and chai', function() {

it('should show an example of synchronous unit test', function() {

//simple test

var sum = 1 + 1;
//after initializing chai.should() every variable in
//this scope has the special property 'should'
sum.should.be.equal(2);
});

//For an asynchronous test we can add the especial parameter 'done' (you can use any name)
// which is a callback that informs mocha when the test has finished
it('should show an example of an asynchronous unit test', function(done) {

//some async call
setTimeout(function() {

//simple test

var sum = 1 + 1;
sum.should.be.equal(2);
done(); //inform mocha that this test is done
}, 1000);

});

});

</pre>

<h3 id="running-your-tests">Running your tests</h3>

<ul>
<li>In your package.json edit scripts.test property and set the following value</li>
</ul>

<pre class="brush: jscript; title: ; notranslate" title="">//package.json file
...
"scripts": {
"test": "node ./node_modules/.bin/mocha"
}
</pre>

<ul>
<li>In your terminal run &#8216;npm test&#8217;</li>
</ul>

<pre class="brush: bash; title: ; notranslate" title="">npm test

&gt; mochachaitest@1.0.0 test /home/otto/tutorial/mochachaitest
&gt; node ./node_modules/.bin/mocha
Showcase of mocha and chai
✓ should show an example of synchronous unit test
✓ should show an example of an asynchronous unit test (1005ms)
2 passing (1s)
</pre>

<p><em>This will run the script you&#8217;ve just added to the package.json file</em>.</p>

<h3 id="conclusion">Conclusion</h3>

<p>There are several options for implementing your tests in Node.js. Check <a href="https://github.com/hapijs/lab">HapiJS Lab</a> it is another test framework I liked. You can choose the option that best suit to your needs, style, and existing tooling. When reviewing your options you might take into account features such asynchronous support, compatible assertion libraries, options for tests code coverage and code style (eslint, jslint etc).</p>

<p><em>Code for this example is available on github <a href="https://github.com/ottogiron/mochachaitest">https://github.com/ottogiron/mochachaitest</a></em></p>
</div>


  <footer class="container">
  <div class="container navigation no-print">
  <h2>Navigation</h2>
  
  

    
    <a class="prev" href="https://ottogiron.me/2015/03/16/waterline-node.js-adapter-based-orm/" title="Waterline: Node.js adapter-based ORM">
      Previous
    </a>
    

    
    <a class="next" href="https://ottogiron.me/2015/03/30/node.js-code-coverage-with-istanbul-and-mocha/" title="Node.js Code Coverage with Istanbul and Mocha">
      Next
    </a>
    

  


</div>

  <div class="container comments">
  <h2>Comments</h2>
  
<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//ottogironme.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>

</footer>

</article>
      <footer id="main-footer" class="container main_footer">
  

  <div class="container nav foot no-print">
  

  <a class="toplink" href="#">back to top</a>

</div>

  <div class="container credits">
  
<div class="container footline">
  
  code with <i class='fa fa-heart'></i>


</div>


  
<div class="container copyright">
  
  &copy; 2018 Otto Giron.


</div>


</div>

</footer>

    </main>
    
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//ottogironme.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



<script src="https://ottogiron.me/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


    
  </body>
</html>

